@using System.Security.Claims;
@{
    var userRole = User.FindFirst(ClaimTypes.Role)?.Value;
    var MaNguoiDung = User.FindFirst(ClaimTypes.Surname)?.Value;
}
@inject ApplicationDbContext _db;
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@ViewData["Title"] - QuanLyKhachSan</title>
    @* <link rel="stylesheet" href="~/lib/bootstrap/dist/css/bootstrap.min.css" /> *@
    <link rel="stylesheet" href="~/css/site.css" asp-append-version="true" />
    <link rel="stylesheet" href="~/css/styleGiaoDienChinh.css" asp-append-version="true" />
    <link rel="stylesheet" href="~/QuanLyKhachSan.styles.css" asp-append-version="true" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">

    <link href='https://unpkg.com/boxicons@2.0.9/css/boxicons.min.css' rel='stylesheet'>

</head>
<body>
    <style>
      
    </style>
    <section id="sidebar">
        <a href="#" class="brand">
            <div class="sidebar-brand-icon">
                @{
                    var qr_AnhNhanVien = _db.NhanVien.FirstOrDefault(s => s.MaNhanVien == MaNguoiDung);
                }
                <img style="height: 52px;left:0;top: 10px;" src="~/css/Screenshot_7_preview_rev_1.png" alt="">
            </div>
            <span class="text">ASAP HOTEL</span>
        </a>
        <ul class="side-menu top">

            <li >
                <a asp-action="Index" asp-controller="Home">
                    <i class='bx bxs-dashboard'></i>
                    <span class="text" data-toggle="tooltip" data-placement="right" title="Tổng quan">Tổng quan</span>
                </a>
            </li>
            @if (User.Identity.IsAuthenticated && userRole == "Quản lý")
            {
                <li>
                        
                    <a asp-action="TrangChuLoaiPhong" asp-controller="LoaiPhong">
                        <i class='bx bxs-hotel'></i>
                        <span class="text">Loại phòng</span>
                    </a>
                </li>
            }
            @if (User.Identity.IsAuthenticated && userRole == "Quản lý" || userRole == "Nhân viên")
            {
                <li>
                    <a asp-action="TrangChuPhong" asp-controller="Phong">
                        <i class='bx bxs-hotel'></i>
                        <span class="text">Phòng</span>
                    </a>
                </li>
            }
            @if (User.Identity.IsAuthenticated && userRole == "Quản lý")
            {
                <li>
                    <a asp-action="TrangChuNhanVien" asp-controller="Nhanvien">
                        <i class='bx bxs-group'></i>
                        <span class="text">Nhân viên</span>
                    </a>
                </li>
            }
            @if (User.Identity.IsAuthenticated && userRole == "Quản lý" || userRole == "Nhân viên")
            {
                <li>
                    <a asp-action="DanhSachDichVu" asp-controller="DichVu">
                        <i class='bx bxs-cog'></i>
                        <span class="text">Dịch vụ</span>
                    </a>
                </li>
            }
            @if (User.Identity.IsAuthenticated && userRole == "Quản lý" || userRole == "Nhân viên")
            {
                <li>
                    <a asp-action="DanhSachVatTu" asp-controller="VatTu">
                        <i class='bx bxs-cog'></i>
                        <span class="text">Vật tư</span>
                    </a>
                </li>
            }
            @if (User.Identity.IsAuthenticated && userRole == "Quản lý")
            {
                <li>
                    <a asp-action="DanhSachKhachHang" asp-controller="KhachHang">
                        <i class='bx bxs-user'></i>
                        <span class="text">Khách hàng</span>
                    </a>
                </li>
            }
            @if (User.Identity.IsAuthenticated && userRole == "Quản lý" || userRole == "Nhân viên")
            {
                <li>
                    <a asp-action="Index" asp-controller="TiepNhanDatPhong">
                        <i class='bx bxs-hotel'></i>
                        <span class="text">Tiếp nhận đặt phòng</span>
                    </a>
                </li>
                <li>
                    <a asp-action="Index" asp-controller="DatPhong">
                        <i class='bx bxs-hotel'></i>
                        <span class="text">Đặt phòng</span>
                    </a>
                </li>
                <li>
                    <a asp-action="Index" asp-controller="QuanLyDatPhong">
                        <i class='bx bxs-hotel'></i>
                        <span class="text">Quản lý đặt phòng</span>
                    </a>
                </li>

                <li>
                    <a asp-action="TrangChuHoaDon" asp-controller="HoaDon">
                        <i class='bx bxs-receipt'></i>
                        <span class="text">Hóa đơn</span>
                    </a>
                </li>
            }
        </ul>
        <ul class="side-menu">
                <li>
                    <a asp-action="Index" asp-controller="TrangChuKhachHang">
                    <i class='bx bxs-user-account'></i>
                    <span class="text">Trang chủ khách hàng</span>
                    </a>
                </li>
                <li>
                <a asp-action="HoSoNhanVien" asp-controller="NhanVien">
                    <i class='bx bxs-user-circle icon'></i>
                        <span class="text">Hồ sơ</span>
                    </a>
                </li>
                <li>
                    <a class="logout" asp-action="LogOut" asp-controller="Home">
                        <i class='bx bxs-log-out'></i>
                        <span class="text">Đăng xuất</span>
                    </a>
                </li>
            
        </ul>

    </section>
    <section id="content">
        <nav>
            <i class='bx bx-menu' id="HandleButton"></i>
            <a href="#" class="nav-link"></a>
            <form action="#">
                <div class="form-input" id="currentDateTime" style="font-size:1.3rem;"></div>
            </form>
            <a href="#" class="notification">
                <i class='bx bxs-bell'></i>
                <span class="num">8</span>
            </a>
            <div class="profile">
                <img src="~/@qr_AnhNhanVien.AnhNhanVienBase64">
                <ul class="profile-link">
                    <li><a asp-action="HoSoNhanVien" asp-controller="NhanVien"><i class='bx bxs-user-circle icon'></i> Hồ sơ</a></li>
                    <li><a asp-action="LichSuHoatDong" asp-controller="NhanVien"><i class='bx bx-history'></i>Lịch sử hoạt động</a></li>
                    <li><a asp-action="LogOut" asp-controller="Home"> <i class='bx bxs-log-out'></i> Đăng xuất</a></li>
                </ul>
            </div>
        </nav>
        <main role="main" class="pb-3">
            @RenderBody()
        </main>
    </section>

    <script>
       
        function updateClock() {
            var currentDateTimeElement = document.getElementById('currentDateTime');
            var currentTime = new Date();
            var hours = currentTime.getHours();
            var minutes = currentTime.getMinutes();
            var seconds = currentTime.getSeconds();
            var day = currentTime.getDate();
            var month = currentTime.getMonth() + 1;
            var year = currentTime.getFullYear();

            var formattedDateTime = day + "/" + month + "/" + year + " - " + hours + ":" + minutes + ":" + seconds;

            currentDateTimeElement.innerHTML = formattedDateTime;
            setTimeout(updateClock, 1000);
        }
        updateClock();
    </script>
    <script src="~/lib/jquery/dist/jquery.min.js"></script>
    <script src="~/lib/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
    <script src="~/js/site.js" asp-append-version="true"></script>
    <script src="~/js/jsGiaoDienChinh.js" asp-append-version="true"></script>
    @await RenderSectionAsync("Scripts", required: false)
</body>
</html>
